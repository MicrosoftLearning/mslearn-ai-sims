<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Playground</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Chat playground</h1>
        </header>
        
        <div class="chat-container">
            <!-- Setup Panel -->
            <div class="setup-panel">
                <div class="setup-header">
                    <h3>Setup</h3>
                    <button class="hide-btn" onclick="toggleSetup()">üì¶ Hide</button>
                </div>
                
                <div class="setup-content">
                    <div class="model-section">
                        <label for="model-select">Model</label>
                        <select id="model-select" disabled>
                            <option value="">Loading models...</option>
                        </select>
                        
                        <div class="progress-container" id="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                            <div class="progress-text" id="progress-text">Downloading model: 0%</div>
                        </div>
                    </div>
                    
                    <div class="instructions-section">
                        <label for="system-message">Give the model instructions and context</label>
                        <textarea id="system-message" rows="3" disabled>You are an AI assistant that helps people find information.</textarea>
                        <button class="apply-btn" id="apply-btn" disabled>üìã Apply changes</button>
                    </div>
                    
                    <div class="collapsible-section">
                        <button class="collapsible-btn" onclick="toggleSection('add-data')">
                            ‚ñ∂ Add your data
                        </button>
                        <div class="collapsible-content" id="add-data">
                            <div class="data-upload-section">
                                <p class="section-description">Upload a text file to provide additional context for the AI model.</p>
                                
                                <button class="add-data-btn" id="add-data-btn" onclick="triggerFileUpload()">
                                    üìÅ Add data source
                                </button>
                                
                                <input type="file" id="file-input" accept=".txt" style="display: none;">
                                
                                <div class="file-info" id="file-info" style="display: none;">
                                    <div class="file-details">
                                        <span class="file-name" id="file-name"></span>
                                        <span class="file-size" id="file-size"></span>
                                    </div>
                                    <button class="remove-file-btn" id="remove-file-btn" onclick="removeFile()">üóëÔ∏è</button>
                                </div>
                                
                                <div class="upload-constraints">
                                    <small>‚Ä¢ Text files (.txt) only</small>
                                    <small>‚Ä¢ Maximum size: 3KB</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="collapsible-section">
                        <button class="collapsible-btn" onclick="toggleSection('parameters')">
                            ‚ñ∂ Parameters
                        </button>
                        <div class="collapsible-content" id="parameters">
                            <div class="parameter-group">
                                <label for="temperature-slider">Temperature</label>
                                <div class="slider-container">
                                    <input type="range" id="temperature-slider" min="0" max="2" step="0.1" value="0.7" class="parameter-slider">
                                    <span class="slider-value" id="temperature-value">0.7</span>
                                </div>
                                <div class="parameter-description">Controls randomness. Lower = more focused, Higher = more creative</div>
                            </div>
                            
                            <div class="parameter-group">
                                <label for="top-p-slider">Top P</label>
                                <div class="slider-container">
                                    <input type="range" id="top-p-slider" min="0" max="1" step="0.05" value="0.9" class="parameter-slider">
                                    <span class="slider-value" id="top-p-value">0.9</span>
                                </div>
                                <div class="parameter-description">Nucleus sampling. Controls diversity of word choices</div>
                            </div>
                            
                            <div class="parameter-group">
                                <label for="max-tokens-slider">Max Tokens</label>
                                <div class="slider-container">
                                    <input type="range" id="max-tokens-slider" min="50" max="2000" step="50" value="1000" class="parameter-slider">
                                    <span class="slider-value" id="max-tokens-value">1000</span>
                                </div>
                                <div class="parameter-description">Maximum length of the response</div>
                            </div>
                            
                            <div class="parameter-group">
                                <label for="repetition-penalty-slider">Repetition Penalty</label>
                                <div class="slider-container">
                                    <input type="range" id="repetition-penalty-slider" min="0.5" max="2" step="0.1" value="1.1" class="parameter-slider">
                                    <span class="slider-value" id="repetition-penalty-value">1.1</span>
                                </div>
                                <div class="parameter-description">Reduces repetitive text. Higher values = less repetition</div>
                            </div>
                            
                            <div class="parameter-actions">
                                <button class="reset-btn" onclick="resetParameters()">Reset to Defaults</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Chat Panel -->
            <div class="chat-panel">
                <div class="chat-header">
                    <h3>Chat history</h3>
                    <div class="chat-controls">
                        <button class="icon-btn" title="Clear chat">üóëÔ∏è</button>
                        <button class="icon-btn" title="Settings" onclick="openChatCapabilitiesModal()">‚öôÔ∏è</button>
                    </div>
                </div>
                
                <div class="chat-messages" id="chat-messages">
                    <div class="welcome-message">
                        <div class="chat-icon">üí¨</div>
                        <h3>Start with a prompt</h3>
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <div class="input-wrapper">
                        <textarea 
                            id="user-input" 
                            placeholder="Type user query here (Shift + Enter for new line)"
                            rows="1"
                            disabled
                        ></textarea>
                        <button id="send-btn" disabled>‚û§</button>
                    </div>
                    <div class="input-info">
                        <span class="token-count">*1/128000 tokens in thread</span>
                        <button class="voice-btn" title="Voice input" id="voice-btn" disabled>üéôÔ∏è</button>
                        <button class="stop-btn" title="Stop generation" id="stop-btn" style="display: none;">‚èπÔ∏è</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chat Capabilities Modal -->
    <div class="modal-overlay" id="chat-capabilities-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Chat capabilities</h2>
                <button class="modal-close-btn" onclick="closeChatCapabilitiesModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="speech-section">
                    <h3>Speech</h3>
                    
                    <div class="speech-feature">
                        <h4>Speech to text</h4>
                        <p class="feature-description">The speech to text feature that allows spoken text to be used for input to the model can be enabled or disabled for the playground.</p>
                        <div class="toggle-switch">
                            <input type="checkbox" id="speech-to-text-toggle">
                            <label for="speech-to-text-toggle" class="switch-label">
                                <span class="switch-slider"></span>
                                <span class="switch-text">Enable speech to text</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="speech-feature">
                        <h4>Text to speech</h4>
                        <p class="feature-description">The text to speech that reads the model responses can be enabled or disabled for the playground.</p>
                        <div class="toggle-switch">
                            <input type="checkbox" id="text-to-speech-toggle">
                            <label for="text-to-speech-toggle" class="switch-label">
                                <span class="switch-slider"></span>
                                <span class="switch-text">Enable text to speech</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="voice-config">
                        <div class="config-row">
                            <div class="config-item">
                                <label for="voice-select">Voice configuration</label>
                                <select id="voice-select" class="form-select" disabled>
                                    <option value="">Loading voices...</option>
                                </select>
                            </div>
                            <div class="config-item">
                                <label for="voice-speed">Voice speed</label>
                                <select id="voice-speed" class="form-select" disabled>
                                    <option value="1x" selected>1x</option>
                                    <option value="0.5x">0.5x</option>
                                    <option value="1.5x">1.5x</option>
                                    <option value="2x">2x</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="voice-sample">
                            <label>Voice sample</label>
                            <div class="sample-container">
                                <input type="text" class="sample-text" id="voice-sample-text" value="Hi, how can I help you today?" disabled>
                                <button class="play-btn" onclick="playVoiceSample()" disabled>‚ñ∂</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeChatCapabilitiesModal()">Close</button>
                <button class="btn-primary" onclick="saveChatCapabilities()">Save</button>
            </div>
        </div>
    </div>
    
    <script type="module" src="script.js"></script>
</body>
</html>